# 技术领域
本发明提出一种地图匹配算法，属于数据分析、智慧交通等交叉技术领域。

# 背景技术
近些年随着GPS技术的发展，支持GPS技术的设备越来越多，车辆、智能手机、智能穿戴设备等都可以记录完整的轨迹路线，丰富的GPS轨迹数据为智慧交通以及相关技术提供了数据基础，尤其是近几年网约车的兴起，网约车中配备的GPS设备产生了大量轨迹数据，这些数据能够极大反应道路的状况，将这些数据聚合分析能够实现实时监控道路状态，为交通安全和交通效率方面提供数据基础。地图匹配（MM）技术是通过将惯性导航轨迹与现有的地图数据库中的道路特征进行比较来校正位置误差的技术，是智能交通系统（ITS）的重要组成部分。地图匹配技术不需要增加外部传感器，具有成本低、自主性强、可靠性高的优势，是进一步提高地面设备自主定位能力的有效途径，也是加快智慧交通建设最重要的基础。

理想情况下，车辆的GPS点应位于道路连接线上，然而GPS设备的信号易受到电磁干扰或功率限制的影响，产生大量噪声数据，且目前搭载在车辆上的GPS设备大部分为低采样率设备（采样间隔大于30秒），低采样率设备产生的数据中连续采样点之间的联系较低，且存在噪声数据的影响。地图匹配算法不仅是交通数据的可视化工具，更重要的是能够减少GPS设备精度问题对匹配结果的影响，能够将尽可能多的采样点匹配到正确的道路上。目前国内外车辆导航系统中应用的现有方法已被证明是有效的，利用航位推算技术、差分GPS、无线电信标或高精度载波相位接收机等提高GPS定位精度。然而，由于这些方法依赖外部辅助装置，通常成本很高，相关技术也有点复杂，这些方法限制了它们在实际应用中的推广。为了降低地图匹配的成本，ST-Matching算法考虑了GPS轨迹的空间和时间信息，并对GPS点之间的加权相互影响建模，但算法的过程复杂，数据必须重复映射进行匹配，这限制了该算法的效率。

基于上述问题以及研究成果，本发明采用较经济的方案，在以下方面进行改进：路径上权重的计算不是简单的求和计算，避免了如果错误候选路径的累积权重远⼤于前⼏个候选点中的真正匹配路径，即使错误路径在其后续候选中的权重相对较⼩，错误路径的最终累积权重也将⼤于正确路径的问题；现有的路网数据均为未优化的数据，在路口的表示上，通常有多少个道路交叉点就有多少个路口，如果某个交通岗道路很多，就会产生大量交叉点，进而增加路网中路口的数量，增加路网复杂度。我们应该将属于同一交通岗的所有道路交叉点合并为一个路口，这样可以简化路网数据，加快有关路网的计算，如查找最短路径以及其相关计算；考虑城市道路是立体结构，因为在地图投影计算中虽然是二维投影，但现实道路存在三维形式，且大部分三维形式的道路上层道路与下层道路拥有不同的属性，如高架桥及其下方的道路，在匹配过程中不应将其视为同一条道路。本发明简化了路网结构，将路网构建为三维KD树，应用KNN算法选出候选路段，使用web墨卡托投影匹配候选点，通过位置上下文分析、三个约束条件以及相互影响建模来考虑采样点之间以及候选点之间的相互影响，通过计算的权重构建候选图，计算每个候选点的局部最优路径，最后根据候选图与局部最优路径进行交互式投票，最终选出一条概率最大的路径作为最终的匹配路径。
