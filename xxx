map.on('draw:created', function (e) {
    drawnItems.addLayer(e.layer);

    // 获取矩形区域的边界框
    var bbox = e.layer.getBounds().toBBoxString();

    // 将边界框发送到后端
    fetch('/download_osm_data?bbox=' + bbox)
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                alert(data.message);
            } else {
                alert('Error: ' + data.message);
            }
        });
});

