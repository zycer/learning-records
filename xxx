在本节中，我们同样采用了Kaggle提供的葡萄牙波尔图市从2018年6月到2018年9月某出租车运营公司的开放数据集。数据集包括1,710,666条真实出租车轨迹数据，共计83,409,193个轨迹点。交通拓扑由OpenStreetMap提供。为了解决城市道路行驶时间分布估计问题，我们首先进行了特征的选择与处理，然后构建了时空图。
我们首先对原始数据进行预处理，将轨迹数据与交通网络拓扑相匹配。我们采用了论文中的第三章提出的基于交互式投票的地图匹配方法（MIVMM），将数据集中的数据与OpenStreetMap提供的交通网络拓扑数据相匹配，并计算每条道路的平均行驶速度。经过分析，我们发现能够提取的有效特征包括道路长度、道路类型、限速和平均行驶速度等。在接下来的特征处理阶段，我们使用MinMaxScaler将道路特征即道路长度、道路类型以及限速进行归一化，其中道路类型先使用OneHot进行编码，使用StandardScaler对道路之间连接关系的特征即一条道路行驶到另一条道路的时间特征进行归一化，对这些特征进行归一化处理的目的是以消除量纲的影响。
为了充分考虑时空关系对道路行驶时间分布估计的影响，我们将上述数据集构建为时空图。首先，我们将所有数据分成了17000个时空图G(V,E)，其中节点V表示道路，其特征分别为长度和限速；边特征为一条道路到另一条道路的行驶时间。每个时空图的时间间隔为1800秒，即30分钟。这种构建方式既能够体现道路之间的拓扑关系，又能够包含道路的时空动态变化，为模型提供了丰富的信息。
